## ‚úî ÌîÑÎ°úÏ†ùÌä∏ ÏÉùÏÑ±
### 1. Spring Initializr
![spring initializr](https://user-images.githubusercontent.com/54324782/222021464-d9b83fb5-3e97-42da-be75-94fedbedd258.png)

### 2. Run main() > localhost:8080 Ï†ëÏÜç
![run](https://user-images.githubusercontent.com/54324782/222021632-c44c2123-d558-4c41-9ace-d0a88b486d90.png)

```
// Ï£ºÏùò! - Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ 3.0
Ïä§ÌîÑÎßÅ Î∂ÄÌä∏ 3.0ÏùÑ ÏÑ†ÌÉùÌïòÍ≤å ÎêòÎ©¥ Îã§Ïùå Î∂ÄÎ∂ÑÏùÑ ÌôïÏù∏Ìï¥Ïïº ÌïúÎã§.
- Java 17 Ïù¥ÏÉÅÏùÑ ÏÇ¨Ïö©Ìï¥Ïïº ÌïúÎã§.
- javax Ìå®ÌÇ§ÏßÄ Ïù¥Î¶ÑÏùÑ jakartaÎ°ú Î≥ÄÍ≤ΩÌï¥Ïïº ÌïúÎã§.
  - Ïò§ÎùºÌÅ¥Í≥º ÏûêÎ∞î ÎùºÏù¥ÏÑ†Ïä§ Î¨∏Ï†úÎ°ú Î™®Îì† javax Ìå®ÌÇ§ÏßÄÎ•º jakartaÎ°ú Î≥ÄÍ≤Ω
  - ex. JPA Ïñ¥ÎÖ∏ÌÖåÏù¥ÏÖò: javax.persistence.Entity -> jakarta.persistence.Entity
```

- - -
## ‚úî ÏòàÏ†ú ÌîÑÎ°úÏ†ùÌä∏ ÎßåÎì§Í∏∞ -V0
- ÏÉÅÌíà Ï£ºÎ¨∏ ÌîÑÎ°úÏÑ∏Ïä§
- Controller -> Service > RepositoryÎ°ú Ïù¥Ïñ¥ÏßÄÎäî ÌùêÎ¶Ñ

### 1. OrderRepositoryV0
java > hello.advanced.app.v0 > OrderRepositoryV0.java (class)
```java
package hello.advanced.app.v0;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Repository;


@Repository
@RequiredArgsConstructor
public class OrderRepositoryV0 {

    // Ï†ÄÏû• Î°úÏßÅ
    public void save(String itemId) {
        if (itemId.equals("ex")) {
            throw new IllegalStateException("ÏòàÏô∏ Î∞úÏÉù!");
        }
        sleep(1000); // 1Ï¥à
    }

    private void sleep(int millies) {
        try {
            Thread.sleep(millies);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

```
- `@Repository` : Ïª¥Ìè¨ÎÑåÌä∏ Ïä§Ï∫îÏùò ÎåÄÏÉÅÏù¥ ÎêúÎã§. Îî∞ÎùºÏÑú Ïä§ÌîÑÎßÅ ÎπàÏúºÎ°ú ÏûêÎèô Îì±Î°ùÎêúÎã§.
- `sleep(1000)` : Î¶¨Ìè¨ÏßÄÌÜ†Î¶¨Îäî ÏÉÅÌíàÏùÑ Ï†ÄÏû•ÌïòÎäîÎç∞ ÏïΩ 1Ï¥à Ï†ïÎèÑ Í±∏Î¶¨Îäî Í≤ÉÏúºÎ°ú Í∞ÄÏ†ïÌïòÍ∏∞ ÏúÑÌï¥ 1Ï¥à ÏßÄÏó∞ÏùÑ Ï£ºÏóàÎã§. (1000ms)
- ÏòàÏô∏Í∞Ä Î∞úÏÉùÌïòÎäî ÏÉÅÌô©ÎèÑ ÌôïÏù∏ÌïòÍ∏∞ ÏúÑÌï¥ ÌååÎùºÎØ∏ÌÑ∞ itemIdÏùò Í∞íÏù¥ "ex"Î°ú ÎÑòÏñ¥Ïò§Î©¥ `IllegalStateException` ÏòàÏô∏Í∞Ä Î∞úÏÉùÌïòÎèÑÎ°ù ÌñàÎã§.

### 2. OrderServiceV0
java > hello.advanced.app.v0 > OrderServiceV0.java (class)
```java
package hello.advanced.app.v0;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

@Service
@RequiredArgsConstructor
public class OrderServiceV0 {
    private final OrderRepositoryV0 orderRepository;
    
    public void orderItem(String itemId) {
        orderRepository.save(itemId);
    }
}

```
- `@Service` : Ïª¥Ìè¨ÎÑåÌä∏ Ïä§Ï∫îÏùò ÎåÄÏÉÅÏù¥ ÎêúÎã§.

### 3. OrderControllerV0
java > hello.advanced.app.v0 > OrderControllerV0.java (class)
```java
package hello.advanced.app.v0;

import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequiredArgsConstructor
public class OrderControllerV0 {
    private final OrderServiceV0 orderService;
    
    @GetMapping("/v0/request")
    public String request(String itemId) {
        orderService.orderItem(itemId);
        return "ok";
    }
}

```
- `@RestController` : Ïª¥Ìè¨ÎÑåÌä∏ Ïä§Ï∫îÍ≥º Ïä§ÌîÑÎßÅ Rest Ïª®Ìä∏Î°§Îü¨Î°ú Ïù∏ÏãùÎêúÎã§.
- `/v0/request` Î©îÏÑúÎìúÎäî HTTP ÌååÎùºÎØ∏ÌÑ∞Î°ú `itemId`Î•º Î∞õÏùÑ Ïàò ÏûàÎã§.

### 4. Ïã§Ìñâ
#### üí° itemIdÍ∞Ä helloÏùº Í≤ΩÏö∞
http://localhost:8080/v0/request?itemId=hello

![hello](https://user-images.githubusercontent.com/54324782/222025323-a29a619b-3419-4370-87a5-1d717ac1b785.png)

#### üí° itemIdÍ∞Ä exÏùº Í≤ΩÏö∞ - ÏòàÏô∏ Î∞úÏÉù
http://localhost:8080/v0/request?itemId=ex

![ex](https://user-images.githubusercontent.com/54324782/222025391-e3158296-edcb-4ffa-9226-68e4b41e0d43.png)
![ÏòàÏô∏ Î∞úÏÉù](https://user-images.githubusercontent.com/54324782/222025433-1cb97588-27bd-4381-9220-a0a9d0e0a69a.png)


- - -
## ‚úî Î°úÍ∑∏ Ï∂îÏ†ÅÍ∏∞ - ÏöîÍµ¨ÏÇ¨Ìï≠ Î∂ÑÏÑù
### 1. ÏöîÍµ¨ÏÇ¨Ìï≠
- Î™®Îì† PUBLIC Î©îÏÑúÎìúÏùò Ìò∏Ï∂úÍ≥º ÏùëÎãµ Ï†ïÎ≥¥Î•º Î°úÍ∑∏Î°ú Ï∂úÎ†•
- Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùò ÌùêÎ¶ÑÏùÑ Î≥ÄÍ≤ΩÌïòÎ©¥ ÏïàÎê®
  - Î°úÍ∑∏Î•º ÎÇ®Í∏¥Îã§Í≥† Ìï¥ÏÑú ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅÏùò ÎèôÏûëÏóê ÏòÅÌñ•ÏùÑ Ï£ºÎ©¥ ÏïàÎê®
- Î©îÏÑúÎìú Ìò∏Ï∂úÏóê Í±∏Î¶∞ ÏãúÍ∞Ñ
- Ï†ïÏÉÅ ÌùêÎ¶ÑÍ≥º ÏòàÏô∏ ÌùêÎ¶Ñ Íµ¨Î∂Ñ
  - ÏòàÏô∏ Î∞úÏÉùÏãú ÏòàÏô∏ Ï†ïÎ≥¥Í∞Ä ÎÇ®ÏïÑÏïº Ìï®
- Î©îÏÑúÎìú Ìò∏Ï∂úÏùò ÍπäÏù¥ ÌëúÌòÑ
- HTTP ÏöîÏ≤≠ÏùÑ Íµ¨Î∂Ñ
  - HTTP ÏöîÏ≤≠ Îã®ÏúÑÎ°ú ÌäπÏ†ï IDÎ•º ÎÇ®Í≤®ÏÑú Ïñ¥Îñ§ HTTP ÏöîÏ≤≠ ÏóêÏÑú ÏãúÏûëÎêú Í≤ÉÏù∏ÏßÄ Î™ÖÌôïÌïòÍ≤å Íµ¨Î∂ÑÏù¥ Í∞ÄÎä•Ìï¥Ïïº Ìï®
  - Ìä∏ÎûúÏû≠ÏÖò ID (DB Ìä∏ÎûúÏû≠ÏÖòX), Ïó¨Í∏∞ÏÑúÎäî ÌïòÎÇòÏùò HTTP ÏöîÏ≤≠Ïù¥ ÏãúÏûëÌï¥ÏÑú ÎÅùÎÇ† Îïå ÍπåÏßÄÎ•º ÌïòÎÇòÏùò Ìä∏ÎûúÏû≠ÏÖòÏù¥Îùº Ìï®

### 2. ÏòàÏãú
```
Ï†ïÏÉÅ ÏöîÏ≤≠
[796bccd9] OrderController.request()
[796bccd9] |-->OrderService.orderItem()
[796bccd9] | |-->OrderRepository.save()
[796bccd9] | |<--OrderRepository.save() time=1004ms
[796bccd9] |<--OrderService.orderItem() time=1014ms
[796bccd9] OrderController.request() time=1016ms

ÏòàÏô∏ Î∞úÏÉù
[b7119f27] OrderController.request()
[b7119f27] |-->OrderService.orderItem()
[b7119f27] | |-->OrderRepository.save()
[b7119f27] | |<X-OrderRepository.save() time=0ms
ex=java.lang.IllegalStateException: ÏòàÏô∏ Î∞úÏÉù!
[b7119f27] |<X-OrderService.orderItem() time=10ms
ex=java.lang.IllegalStateException: ÏòàÏô∏ Î∞úÏÉù!
[b7119f27] OrderController.request() time=11ms
ex=java.lang.IllegalStateException: ÏòàÏô∏ Î∞úÏÉù!
```

- - -
## ‚úî Î°úÍ∑∏ Ï∂îÏ†ÅÍ∏∞ V1 - ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ Í∞úÎ∞ú
#### Î°úÍ∑∏ Ï∂îÏ†ÅÍ∏∞Î•º ÏúÑÌïú Í∏∞Î∞ò Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏßÄÍ≥† ÏûàÎäî `TraceId`, `TraceStatus` ÌÅ¥ÎûòÏä§ ÏÉùÏÑ±
### 1. TraceId
java > hello.advanced.trace > TraceId.java (class)
```java
package hello.advanced.trace;

import java.util.UUID;

public class TraceId {
    private String id;
    private int level;
    
    public TraceId() {
        this.id = createId();
        this.level = 0;
    }
    
    private TraceId(String id, int level) {
        this.id = id;
        this.level = level;
    }
    
    private String createId() {
        return UUID.randomUUID().toString().substring(0, 8);
    }
    
    public TraceId createNextId() {
        return new TraceId(id, level + 1);
    }
    
    public TraceId createPreviousId() {
        return new TraceId(id, level - 1);
    }
    
    public boolean isFirstLevel() {
        return level == 0;
    }
    
    public String getId() {
        return id;
    }
    
    public int getLevel() {
        return level;
    }
}
```

#### üí° TraceId ÌÅ¥ÎûòÏä§
- Î°úÍ∑∏ Ï∂îÏ†ÅÍ∏∞Îäî Ìä∏ÎûúÏû≠ÏÖò IDÏôÄ ÍπäÏù¥Î•º ÌëúÌòÑÌïòÎäî Î∞©Î≤ïÏù¥ ÌïÑÏöîÌïòÎã§.
- Ïó¨Í∏∞ÏÑúÎäî Ìä∏ÎûúÏû≠ÏÖòIDÏôÄ ÍπäÏù¥Î•º ÌëúÌòÑÌïòÎäî levelÏùÑ Î¨∂Ïñ¥ÏÑú `TraceId`ÎùºÎäî Í∞úÎÖêÏùÑ ÎßåÎì§ÏóàÎã§.
- `TraceId`Îäî Îã®ÏàúÌûà id(Ìä∏ÎûúÏû≠ÏÖòID)ÏôÄ level Ï†ïÎ≥¥Î•º Ìï®Íªò Í∞ÄÏßÄÍ≥† ÏûàÎã§.
```
[796bccd9] OrderController.request() //Ìä∏ÎûúÏû≠ÏÖòID:796bccd9, level:0
[796bccd9] |-->OrderService.orderItem() //Ìä∏ÎûúÏû≠ÏÖòID:796bccd9, level:1
[796bccd9] | |-->OrderRepository.save()//Ìä∏ÎûúÏû≠ÏÖòID:796bccd9, level:2
```
#### üí° UUID
- TraceIdÎ•º Ï≤òÏùå ÏÉùÏÑ±ÌïòÎ©¥ createId() Î•º ÏÇ¨Ïö©Ìï¥ÏÑú UUIDÎ•º ÎßåÎì§Ïñ¥ÎÇ∏Îã§.
- Ïó¨Í∏∞ÏÑúÎäî Ïïû 8ÏûêÎ¶¨Îßå ÏÇ¨Ïö©
```
ab99e16f-3cde-4d24-8241-256108c203a2 //ÏÉùÏÑ±Îêú UUID
ab99e16f //Ïïû 8ÏûêÎ¶¨Îßå ÏÇ¨Ïö©
```
#### üí° createNextId()
- Îã§Ïùå TraceIdÎ•º ÎßåÎì†Îã§.
- ÍπäÏù¥Í∞Ä ÌïòÎÇò Ï¶ùÍ∞ÄÌïòÎ©∞, ÍπäÏù¥Í∞Ä Ï¶ùÍ∞ÄÌï¥ÎèÑ Ìä∏ÎûúÏû≠ÏÖòIDÎäî Í∞ôÎã§.
- Ïã§Ìñâ ÏΩîÎìú : `new TraceId(id, level + 1)`
- Îî∞ÎùºÏÑú createNextId()Î•º ÏÇ¨Ïö©Ìï¥ÏÑú ÌòÑÏû¨ TraceIdÎ•º Í∏∞Î∞òÏúºÎ°ú Îã§Ïùå TraceIdÎ•º ÎßåÎì§Î©¥ idÎäî Í∏∞Ï°¥Í≥º Í∞ôÍ≥†, levelÏùÄ ÌïòÎÇò Ï¶ùÍ∞ÄÌïúÎã§.
```
[796bccd9] OrderController.request()
[796bccd9] |-->OrderService.orderItem() //Ìä∏ÎûúÏû≠ÏÖòIDÍ∞Ä Í∞ôÎã§. ÍπäÏù¥Îäî ÌïòÎÇò Ï¶ùÍ∞ÄÌïúÎã§.
```
#### üí° createPreviousId()
- createNextId()Ïùò Î∞òÎåÄ Ïó≠Ìï†ÏùÑ ÌïúÎã§.
- idÎäî Í∏∞Ï°¥Í≥º Í∞ôÍ≥†, levelÏùÄ ÌïòÎÇò Í∞êÏÜåÌïúÎã§.
#### üí° isFirstLevel()
- Ï≤´ Î≤àÏß∏ Î†àÎ≤® Ïó¨Î∂ÄÎ•º Ìé∏Î¶¨ÌïòÍ≤å ÌôïÏù∏Ìï† Ïàò ÏûàÎäî Î©îÏÑúÎìú

### 2. TraceStatus
java > hello.advanced.trace > TraceStatus.java (class)
```java
package hello.advanced.trace;

public class TraceStatus {
    private TraceId traceId;
    private Long startTimeMs;
    private String message;
    
    public TraceStatus(TraceId traceId, Long startTimeMs, String message) {
        this.traceId = traceId;
        this.startTimeMs = startTimeMs;
        this.message = message;
    }
    
    public Long getStartTimeMs() {
        return startTimeMs;
    }
    
    public String getMessage() {
        return message;
    }
    
    public TraceId getTraceId() {
        return traceId;
    }
}

```

#### üí° TraceStatus ÌÅ¥ÎûòÏä§
- Î°úÍ∑∏Ïùò ÏÉÅÌÉú Ï†ïÎ≥¥Î•º ÎÇòÌÉÄÎÇ∏Îã§.
- `TraceStatus`Îäî Î°úÍ∑∏Î•º ÏãúÏûëÌï† ÎïåÏùò ÏÉÅÌÉú Ï†ïÎ≥¥Î•º Í∞ÄÏßÄÍ≥† ÏûàÏúºÎ©∞, Ïù¥ ÏÉÅÌÉú Ï†ïÎ≥¥Îäî Î°úÍ∑∏Î•º Ï¢ÖÎ£åÌï† Îïå ÏÇ¨Ïö©ÎêúÎã§.
- `traceId` : ÎÇ¥Î∂ÄÏóê Ìä∏ÎûúÏû≠ÏÖòIDÏôÄ levelÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÎã§.
- `startTimeMs` : Î°úÍ∑∏ ÏãúÏûë ÏãúÍ∞ÑÏù¥Î©∞, Î°úÍ∑∏ Ï¢ÖÎ£åÏãú Ïù¥ ÏãúÏûë ÏãúÍ∞ÑÏùÑ Í∏∞Ï§ÄÏúºÎ°ú ÏãúÏûë~Ï¢ÖÎ£åÍπåÏßÄ Ï†ÑÏ≤¥ ÏàòÌñâÏãúÍ∞ÑÏùÑ Íµ¨Ìï† Ïàò ÏûàÎã§.
- `message` : ÏãúÏûëÏãú ÏÇ¨Ïö©Ìïú Î©îÏãúÏßÄÏù¥Î©∞, Ïù¥ÌõÑ Î°úÍ∑∏ Ï¢ÖÎ£åÏãúÏóêÎèÑ Ïù¥ Î©îÏãúÏßÄÎ•º ÏÇ¨Ïö©Ìï¥ÏÑú Ï∂úÎ†•ÌïúÎã§.

### 3. Î°úÍ∑∏ ÏÉùÏÑ± Î∞è Ï≤òÎ¶¨
- `TraceId`, `TraceStatus`Î•º ÏÇ¨Ïö©Ìï¥ÏÑú Ïã§Ï†ú Î°úÍ∑∏Î•º ÏÉùÏÑ±ÌïòÍ≥†, Ï≤òÎ¶¨ÌïòÎäî Í∏∞Îä•ÏùÑ Í∞úÎ∞ú

#### üí° HelloTraceV1
java > hello.advanced.trace.hellotrace > HelloTraceV1.java (class)
```java
package hello.advanced.trace.hellotrace;

import hello.advanced.trace.TraceId;
import hello.advanced.trace.TraceStatus;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Component;

@Slf4j
@Component
public class HelloTraceV1 {
    private static final String START_PREFIX = "-->";
    private static final String COMPLETE_PREFIX = "<--";
    private static final String EX_PREFIX = "<X-";
    
    public TraceStatus begin(String message) {
        TraceId traceId = new TraceId();
        Long startTimeMs = System.currentTimeMillis();
        log.info("[{}] {}{}", traceId.getId(), addSpace(START_PREFIX, traceId.getLevel()), message);
        return new TraceStatus(traceId, startTimeMs, message);
    }
    
    public void end(TraceStatus status) {
        complete(status, null);
    }
    
    public void exception(TraceStatus status, Exception e) {
        complete(status, e);
    }
    
    private void complete(TraceStatus status, Exception e) {
        Long stopTimeMs = System.currentTimeMillis();
        long resultTimeMs = stopTimeMs - status.getStartTimeMs();
        TraceId traceId = status.getTraceId();
        if (e == null) {
            log.info("[{}] {}{} time={}ms", traceId.getId(), addSpace(COMPLETE_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs);
        } else {
            log.info("[{}] {}{} time={}ms ex={}", traceId.getId(), addSpace(EX_PREFIX, traceId.getLevel()), status.getMessage(), resultTimeMs, e.toString());
        }
    }
    
    private static String addSpace(String prefix, int level) {
        StringBuilder sb = new StringBuilder();
        for (int i=0; i<level; i++) {
            sb.append((i == level - 1) ? "|" + prefix : "| ");
        }
        return sb.toString();
    }
    
}
```

- `HelloTraceV1`ÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú Ïã§Ï†ú Î°úÍ∑∏Î•º ÏãúÏûëÌïòÍ≥† Ï¢ÖÎ£åÌï† Ïàò ÏûàÎã§. ÎòêÌïú, Î°úÍ∑∏Î•º Ï∂úÎ†•ÌïòÍ≥† Ïã§ÌñâÏãúÍ∞ÑÎèÑ Ï∏°Ï†ïÌï† Ïàò ÏûàÎã§.
- `@Component` : Ïã±Í∏ÄÌÜ§ÏúºÎ°ú ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ Ïä§ÌîÑÎßÅ ÎπàÏúºÎ°ú Îì±Î°ùÌïúÎã§. Ïª¥Ìè¨ÎÑåÌä∏ Ïä§Ï∫îÏùò ÎåÄÏÉÅÏù¥ ÎêúÎã§.

#### üí° Í≥µÍ∞ú Î©îÏÑúÎìú
Î°úÍ∑∏ Ï∂îÏ†ÅÍ∏∞ÏóêÏÑú ÏÇ¨Ïö©ÎêòÎäî Í≥µÍ∞ú Î©îÏÑúÎìúÎäî 3Í∞ÄÏßÄÏù¥Îã§. (begin(..), end(..), exception(..))
- `TraceStatus begin(String message)`
  - Î°úÍ∑∏Î•º ÏãúÏûëÌïúÎã§.
  - Î°úÍ∑∏ Î©îÏãúÏßÄÎ•º ÌååÎùºÎØ∏ÌÑ∞Î°ú Î∞õÏïÑÏÑú ÏãúÏûë Î°úÍ∑∏Î•º Ï∂úÎ†•ÌïúÎã§.
  - ÏùëÎãµ Í≤∞Í≥ºÎ°ú ÌòÑÏû¨ Î°úÍ∑∏Ïùò ÏÉÅÌÉúÏù∏ TraceStatusÎ•º Î∞òÌôòÌïúÎã§.
- `void end(TraceStatus status)`
  - Î°úÍ∑∏Î•º Ï†ïÏÉÅ Ï¢ÖÎ£åÌïúÎã§.
  - ÌååÎùºÎØ∏ÌÑ∞Î°ú ÏãúÏûë Î°úÍ∑∏Ïùò ÏÉÅÌÉú(TraceStatus)Î•º Ï†ÑÎã¨ Î∞õÎäîÎã§. Ïù¥ Í∞íÏùÑ ÌôúÏö©Ìï¥ÏÑú Ïã§Ìñâ ÏãúÍ∞ÑÏùÑ Í≥ÑÏÇ∞ÌïòÍ≥†, Ï¢ÖÎ£åÏãúÏóêÎèÑ ÏãúÏûëÌï† ÎïåÏôÄ ÎèôÏùºÌïú Î°úÍ∑∏ Î©îÏãúÏßÄÎ•º Ï∂úÎ†•Ìï† Ïàò ÏûàÎã§.
  - Ï†ïÏÉÅ ÌùêÎ¶ÑÏóêÏÑú Ìò∏Ï∂úÌïúÎã§.
- `void exception(TraceStatus status, Exception e)`
  - Î°úÍ∑∏Î•º ÏòàÏô∏ ÏÉÅÌô©ÏúºÎ°ú Ï¢ÖÎ£åÌïúÎã§.
  - TraceStatus, Exception Ï†ïÎ≥¥Î•º Ìï®Íªò Ï†ÑÎã¨ Î∞õÏïÑÏÑú Ïã§ÌñâÏãúÍ∞Ñ, ÏòàÏô∏ Ï†ïÎ≥¥Î•º Ìè¨Ìï®Ìïú Í≤∞Í≥º Î°úÍ∑∏Î•º Ï∂úÎ†•ÌïúÎã§.
  - ÏòàÏô∏Í∞Ä Î∞úÏÉùÌñàÏùÑ Îïå Ìò∏Ï∂úÌïúÎã§.

#### üí° ÎπÑÍ≥µÍ∞ú Î©îÏÑúÎìú
- `complete(TraceStatus status, Exception e)`
  - `end()`, `exception()`Ïùò ÏöîÏ≤≠ ÌùêÎ¶ÑÏùÑ ÌïúÍ≥≥ÏóêÏÑú Ìé∏Î¶¨ÌïòÍ≤å Ï≤òÎ¶¨ÌïúÎã§. Ïã§Ìñâ ÏãúÍ∞ÑÏùÑ Ï∏°Ï†ïÌïòÍ≥† Î°úÍ∑∏Î•º ÎÇ®Í∏¥Îã§.
- `String addSpace(String prefix, int level)`
  - Îã§ÏùåÍ≥º Í∞ôÏùÄ Í≤∞Í≥ºÎ•º Ï∂úÎ†•

```
prefix: "-->"
- level 0 :
- level 1 : "|-->"
- level 2 : "|   |-->"

prefix: "<--"
- level 0 :
- level 1 : "|<--"
- level 2 : "|   |<--"

prefix: "<X-"
- level 0 :
- level 1 : "|<X-"
- level 2 : "|   |<x-"
```

### 4. ÌÖåÏä§Ìä∏ ÏûëÏÑ±
test > java > hello.advanced.trace.hellotrace > HelloTraceV1Test.java (class)
```java
package hello.advanced.trace.hellotrace;

import hello.advanced.trace.TraceStatus;
import org.junit.jupiter.api.Test;

public class HelloTraceV1Test {
    @Test
    void begin_end() {
        HelloTraceV1 trace = new HelloTraceV1();
        TraceStatus status = trace.begin("hello");
        trace.end(status);
    }
    
    @Test
    void begin_exception() {
        HelloTraceV1 trace = new HelloTraceV1();
        TraceStatus status = trace.begin("hello");
        trace.exception(status, new IllegalStateException());
    }
}

```
```
// begin_end() Ïã§Ìñâ Î°úÍ∑∏
13:04:07.880 [Test worker] INFO hello.advanced.trace.hellotrace.HelloTraceV1 - [90b03594] hello
13:04:07.891 [Test worker] INFO hello.advanced.trace.hellotrace.HelloTraceV1 - [90b03594] hello time=14ms
// begin_exception() Ïã§Ìñâ Î°úÍ∑∏
13:04:59.192 [Test worker] INFO hello.advanced.trace.hellotrace.HelloTraceV1 - [6ad3088a] hello
13:04:59.208 [Test worker] INFO hello.advanced.trace.hellotrace.HelloTraceV1 - [6ad3088a] hello time=20ms ex=java.lang.IllegalStateException
```

- - -
## ‚úî Î°úÍ∑∏ Ï∂îÏ†ÅÍ∏∞ V1 - Ï†ÅÏö©
