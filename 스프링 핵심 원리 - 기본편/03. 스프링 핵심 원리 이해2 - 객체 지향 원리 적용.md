## âœ” ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ
- í• ì¸ ì •ì±…ì„ ê³ ì • ê¸ˆì•¡ í• ì¸ì´ ì•„ë‹ˆë¼ ì¢€ ë” í•©ë¦¬ì ì¸ ì£¼ë¬¸ ê¸ˆì•¡ë‹¹ í• ì¸í•˜ëŠ” `ì •ë¥ % í• ì¸`ìœ¼ë¡œ ë³€ê²½í•  ê²½ìš°
  - ex. 10%ë¡œ ì§€ì •í•  ê²½ìš° ê³ ê°ì´ 10,000ì› ì£¼ë¬¸ ì‹œ 1,000ì›ì„ í• ì¸, 20,000ì› ì£¼ë¬¸ ì‹œ 2,000ì› í• ì¸

### 1. ì •ë¥  í• ì¸ ì •ì±… ì¶”ê°€
hello.core.discount > RateDiscountPolicy.java (class)
````java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy {
    
    private int discountPercent = 10; // 10% í• ì¸

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
````

### 2. í…ŒìŠ¤íŠ¸ ì‘ì„±
test > java > hello.core.discount > RateDiscountPolicyTest.java (class)
````java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

class RateDiscountPolicyTest {
    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test // ì„±ê³µ í…ŒìŠ¤íŠ¸
    @DisplayName("VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤")
    void vip_o() {
        // given
        Member member = new Member(1L, "memberVIP", Grade.VIP);
        // when
        int discount = discountPolicy.discount(member, 10000);
        // then
        Assertions.assertThat(discount).isEqualTo(1000);
    }

    @Test // ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸
    @DisplayName("VIPê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.")
    void vip_x() {
        // given
        Member member = new Member(1L, "memberBASIC", Grade.BASIC);
        // when
        int discount = discountPolicy.discount(member, 10000);
        // then
        Assertions.assertThat(discount).isEqualTo(1000);
        // ë“±ê¸‰ì´ BASICì´ë¯€ë¡œ í• ì¸ê¸ˆì•¡ì€ 0ì›ì´ ë˜ì–´ì•¼ í•œë‹¤.
    }
}
````

### 3. ê²°ê³¼
| vip_o | vip_x |
|:--------:|:--------:|
| Tests passed<br>![image](https://user-images.githubusercontent.com/54324782/209412967-5bbe5b3a-36d1-4bdc-bf90-5a1db0415f3a.png) | Tests failed<br>![image](https://user-images.githubusercontent.com/54324782/209413003-7b9d645a-695f-46b1-9dd3-8342566ccb2f.png)

- - -
## âœ” ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 
- í• ì¸ ì •ì±… ë³€ê²½ì„ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì½”ë“œë¥¼ ìˆ˜ì •
````java
public class OrderServiceImpl implements OrderService {
    // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
````

### 1. ë¬¸ì œì  ë°œê²¬
- ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬ --> OK
- ë‹¤í˜•ì„±ë„ í™œìš©í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ë¥¼ ë¶„ë¦¬ --> OK
- OCP, DIP ê°™ì€ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì¶œì‹¤í•´ ì¤€ìˆ˜ --> __X__
  - DIP ìœ„ë°˜ : êµ¬ì²´í™”ì— ì˜ì¡´í•˜ì§€ ì•Šê³  ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•˜ëŠ”ë°, ë‘˜ ë‹¤ ì˜ì¡´
```
- ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ì˜ì¡´ : DiscountPolicy
- êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤ : FixDiscountPolicy, RateDiscountPolicy
```
  - OCP ìœ„ë°˜ : í˜„ì¬ ì½”ë“œëŠ” ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ì¤€ë‹¤.
    - ì¦‰, `FixDiscountPolicy`ë¥¼ `RateDiscountPolicy`ë¡œ ë³€ê²½í•˜ëŠ” ìˆœê°„ `OrderServiceImpl`ì˜ ì†ŒìŠ¤ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤.

### 2. ì–´ë–»ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?
- DIPë¥¼ ìœ„ë°˜í•˜ì§€ ì•Šë„ë¡ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½
````java
public class OrderServiceImpl implements OrderService {
    // private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    private DiscountPolicy discountPolicy;
}
````

- í•˜ì§€ë§Œ ì‹¤ì œ ì‹¤í–‰ì„ í•´ë³´ë©´ `NPE(Null Pointer Exception)`ê°€ ë°œìƒ !!!

### ğŸ’¡ í•´ê²° ë°©ì•ˆ
ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImplì— `DiscountPolicyì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…`í•´ì£¼ì–´ì•¼ í•œë‹¤.

- - -
## âœ” ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬
