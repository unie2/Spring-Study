## âœ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì… ì‹œì‘í•˜ê¸°
- ì§€ê¸ˆê¹Œì§€ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•  ë•ŒëŠ” ìë°” ì½”ë“œì˜ @Beanì´ë‚˜ XMLì˜ <bean> ë“±ì„ í†µí•´ì„œ ì„¤ì • ì •ë³´ì— ì§ì ‘ ë“±ë¡í•  ìŠ¤í”„ë§ ë¹ˆì„ ë‚˜ì—´í•˜ì˜€ë‹¤.
- ë“±ë¡í•´ì•¼ í•  ìŠ¤í”„ë§ ë¹ˆì˜ ê°œìˆ˜ê°€ ë§ì„ ê²½ìš° ì¼ì¼ì´ ë“±ë¡í•˜ê¸° ê·€ì°®ê³ , ì„¤ì • ì •ë³´ë„ ì»¤ì§€ê³ , ëˆ„ë½í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
  - ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ì€ `ì„¤ì • ì •ë³´ê°€ ì—†ì–´ë„ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”` ê¸°ëŠ¥ì„ ì œê³µ
  - ë˜í•œ `ì˜ì¡´ê´€ê³„ë„ ìë™ìœ¼ë¡œ ì£¼ì…`í•˜ëŠ” `@Autowired` ê¸°ëŠ¥ë„ ì œê³µ
  
### 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì‚¬ìš©
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € `@ComponentScan`ì„ ì„¤ì • ì •ë³´ì— ë¶™ì—¬ì¤€ë‹¤.
- ê¸°ì¡´ì˜ AppConfigì™€ëŠ” ë‹¤ë¥´ê²Œ @Beanìœ¼ë¡œ ë“±ë¡í•œ í´ë˜ìŠ¤ê°€ í•˜ë‚˜ë„ ì—†ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
  
java > hello.core > AutoAppConfig.java (class)
````java
package hello.core;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;
import static org.springframework.context.annotation.ComponentScan.*;

@Configuration
@ComponentScan(excludeFilters = @Filter(type = FilterType.ANNOTATION, classes = Configuration.class))
public class AutoAppConfig {
    
}
````
```
// ì°¸ê³ 
(1)
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•˜ë©´ @Configurationì´ ë¶™ì€ ì„¤ì • ì •ë³´ë„ ìë™ìœ¼ë¡œ ë“±ë¡ë˜ê¸° ë•Œë¬¸ì—, AppConfig, TestConfig ë“± ì•ì„œ ë§Œë“¤ì–´ë‘ì—ˆë˜ ì„¤ì • ì •ë³´ë„ í•¨ê»˜ ë“±ë¡ë˜ê³ , ì‹¤í–‰ë˜ì–´ ë²„ë¦°ë‹¤.
- ë”°ë¼ì„œ excludeFiltersë¥¼ ì´ìš©í•´ì„œ ì„¤ì • ì •ë³´ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸
- ë³´í†µ ì„¤ì • ì •ë³´ë¥¼ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ê¸°ì¡´ ì˜ˆì œ ì½”ë“œë¥¼ ìµœëŒ€í•œ ë‚¨ê¸°ê³  ìœ ì§€í•˜ê¸° ìœ„í•¨
  
(2)
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì€ ì´ë¦„ ê·¸ëŒ€ë¡œ @Component ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ìŠ¤ìº”í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.
- @Configurationì´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ëœ ì´ìœ ë„ @Configuration ì†ŒìŠ¤ì½”ë“œì— @Component ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤.
```

### 2. ê° í´ë˜ìŠ¤ê°€ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ë˜ë„ë¡ @Component ì• ë…¸í…Œì´ì…˜ ì„¤ì •
#### (1) MemoryMemberRepository - @Component ì¶”ê°€
````java
@Component
public class MemoryMemberRepository implements MemberRepository {}
````
#### (2) RateDiscountPolicy - @Component ì¶”ê°€
````java
@Component
public class RateDiscountPolicy implements DiscountPolicy {}
````
#### (3) MemberServiceImpl - @Component, @Autowired ì¶”ê°€
````java
@Component
public class MemberServiceImpl implements MemberService {
    private final MemberRepository memberRepository;

    @Autowired
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    } 
    .
    .
}
````
- ì´ì „ì— AppConfigì—ì„œëŠ” `@Bean`ìœ¼ë¡œ ì§ì ‘ ì„¤ì • ì •ë³´ë¥¼ ì‘ì„±í–ˆê³ , ì˜ì¡´ê´€ê³„ë„ ì§ì ‘ ëª…ì‹œí•˜ì˜€ì§€ë§Œ,
- ì´ì œëŠ” ì´ëŸ° ì„¤ì • ì •ë³´ ìì²´ê°€ ì—†ê¸° ë•Œë¬¸ì—, ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ì´ í´ë˜ìŠ¤ ì•ˆì—ì„œ í•´ê²°í•´ì•¼ í•œë‹¤.
- `@Autowired`ëŠ” ì˜ì¡´ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•´ì¤€ë‹¤.
  
#### (4) OrderServiceImpl - @Component, @Autowired ì¶”ê°€
````java
@Component
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired // @Autowiredë¥¼ ì‚¬ìš©í•˜ë©´ ìƒì„±ìì—ì„œ ì—¬ëŸ¬ ì˜ì¡´ê´€ê³„ë„ í•œë²ˆì— ì£¼ì…ë°›ì„ ìˆ˜ ìˆë‹¤.
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) { // ìƒì„±ì ì£¼ì…
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
    .
    .
}
````
### 3. Test ì½”ë“œ ì‘ì„±
test > java > hello.core.scan > AutoAppConfigTest.java (class)
````java
package hello.core.scan;

import hello.core.AutoAppConfig;
import hello.core.member.MemberService;
import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import static org.assertj.core.api.Assertions.*;

public class AutoAppConfigTest {
    @Test
    void basicScan() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class);
        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberService.class);
    }
}
````
- `AnnotationConfigApplicationContext`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê¸°ì¡´ê³¼ ë™ì¼
- ì„¤ì • ì •ë³´ë¡œ `AutoAppConfig`í´ë˜ìŠ¤ë¥¼ ë„˜ê²¨ì¤€ë‹¤.

#### ğŸ’¡ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸
| Tests passed | ë¡œê·¸ ìš”ì•½ |
|:--------:|:--------|
| ![Tests passed](https://user-images.githubusercontent.com/54324782/214566895-d3ef4b66-d71a-4b54-aa79-66c5e0b272e1.png) | ClassPathBeanDefinitionScanner - Identified candidate component class: <br>.. RateDiscountPolicy.class <br>.. MemberServiceImpl.class <br>.. MemoryMemberRepository.class <br>.. OrderServiceImpl.class
  
### 4. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì£¼ì… ë™ì‘ ë°©ì‹
#### (1) @ComponentScan
![@ComponentScan](https://user-images.githubusercontent.com/54324782/214567626-5b1d4c33-c297-4638-bc1e-681e1871af4e.png)
- `@ComponentScan`ì€ `@Component`ê°€ ë¶™ì€ ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
- ì´ë•Œ ìŠ¤í”„ë§ ë¹ˆì˜ ê¸°ë³¸ ì´ë¦„ì€ í´ë˜ìŠ¤ëª…ì„ ì‚¬ìš©í•˜ë˜ ë§¨ ì•ê¸€ìë§Œ ì†Œë¬¸ìë¥¼ ì‚¬ìš©
  - ë¹ˆ ì´ë¦„ ê¸°ë³¸ ì „ëµ: MemberServiceImpl í´ë˜ìŠ¤ --> memberServiceImpl
  - ë¹ˆ ì´ë¦„ ì§ì ‘ ì§€ì • ì‹œ: `@Component("memberService2")`ì™€ ê°™ì´ ì´ë¦„ ë¶€ì—¬
#### (2) @Autowired ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…
![@Autowired](https://user-images.githubusercontent.com/54324782/214568585-0eb00ba5-a7f2-4ea6-8069-6d2caff8a1df.png)
- ìƒì„±ìì— `Autowired`ë¥¼ ì§€ì •í•˜ë©´, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…
- ì´ë•Œ ê¸°ë³¸ ì¡°íšŒ ì „ëµì€ `íƒ€ì…ì´ ê°™ì€ ë¹ˆ`ì„ ì°¾ì•„ì„œ ì£¼ì…
  - `getBean(MemberRepository.class)`ì™€ ë™ì¼í•˜ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.
  
![@Autowired](https://user-images.githubusercontent.com/54324782/214568921-e1fd91ce-d96f-4da6-adcf-8be6351e67c8.png)
- ìƒì„±ìì— íŒŒë¼ë¯¸í„°ê°€ ë§ì•„ë„ ë‹¤ ì°¾ì•„ì„œ ìë™ìœ¼ë¡œ ì£¼ì…

- - -
## âœ” íƒìƒ‰ ìœ„ì¹˜ì™€ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒ
### 1. íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ ìœ„ì¹˜ ì§€ì •
- ëª¨ë“  ìë°” í´ë˜ìŠ¤ë¥¼ ë‹¤ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”í•˜ë©´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤.
- ë”°ë¼ì„œ, ê¼­ í•„ìš”í•œ ìœ„ì¹˜ë¶€í„° íƒìƒ‰í•˜ë„ë¡ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
````java
@ComponentScan(
  basePackages = "hello.core",
)
````
- `basePackages`: íƒìƒ‰í•  íŒ¨í‚¤ì§€ì˜ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì§€ì •. ì´ íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•´ì„œ í•˜ìœ„ íŒ¨í‚¤ì§€ë¥¼ ëª¨ë‘ íƒìƒ‰.
  - `basePackages = {"hello.core", "hello.service"}` ì™€ ê°™ì´ ì—¬ëŸ¬ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì§€ì •í•  ìˆ˜ë„ ìˆë‹¤.
- `basePackageClasses`: ì§€ì •í•œ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ë¥¼ íƒìƒ‰ ì‹œì‘ ìœ„ì¹˜ë¡œ ì§€ì •
- ë§Œì•½ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ `@ComponentScan`ì´ ë¶™ì€ ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ì‹œì‘ ìœ„ì¹˜ê°€ ëœë‹¤.
  
### ğŸ’¡ ê¶Œì¥í•˜ëŠ” ë°©ë²•
- íŒ¨í‚¤ì§€ ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³ , ì„¤ì • ì •ë³´ í´ë˜ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ í”„ë¡œì íŠ¸ ìµœìƒë‹¨ì— ë‘ëŠ” ê²ƒ
```
ex) ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¼ë©´,
- com.hello
- com.hello.service
- com.hello.repository
com.hello(=í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸) ì— AppConfigê°™ì€ ë©”ì¸ ì„¤ì • ì •ë³´ë¥¼ ë‘ê³ ,
@ComponentScan ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ê³ , basePackages ì§€ì •ì€ ìƒëµí•œë‹¤.

ì´ë ‡ê²Œ í•˜ë©´ com.hello ë¥¼ í¬í•¨í•œ í•˜ìœ„ëŠ” ëª¨ë‘ ìë™ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ëœë‹¤.
ë˜í•œ, í”„ë¡œì íŠ¸ ë©”ì¸ ì„¤ì • ì •ë³´ëŠ” í”„ë¡œì íŠ¸ë¥¼ ëŒ€í‘œí•˜ëŠ” ì •ë³´ì´ê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸ ìœ„ì¹˜ì— ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤.
ì°¸ê³ ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ëŒ€í‘œ ì‹œì‘ ì •ë³´ì¸ `@SpringBootApplication`ì„ ì´ í”„ë¡œì íŠ¸ ì‹œì‘ ë£¨íŠ¸ ìœ„ì¹˜ì— ë‘ëŠ” ê²ƒì´ ê´€ë¡€ì´ë‹¤.
(ê·¸ë¦¬ê³  ì´ ì„¤ì •ì•ˆì— ë°”ë¡œ @ComponentScanì´ ë“¤ì–´ìˆë‹¤.)
```
  
### 2. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë³¸ ëŒ€ìƒ
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì€ `@Component`ë¿ë§Œ ì•„ë‹ˆë¼ ì•„ë˜ ë‚´ìš©ë„ ì¶”ê°€ë¡œ ëŒ€ìƒì— í¬í•¨í•œë‹¤.
  - @Component : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì‚¬ìš©
  - @Controller : ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©
  - @Service : ìŠ¤í”„ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì‚¬ìš©
  - @Repository : ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì—ì„œ ì‚¬ìš©
  - @Configuration : ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ì—ì„œ ì‚¬ìš©
- í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³´ë©´ `@Component`ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
````java
@Component
public @interface Controller { }

@Component
public @interface Service {}
  
@Component
public @interface Configuration {}

/* ì°¸ê³ 
ì‚¬ì‹¤ ì–´ë…¸í…Œì´ì…˜ì—ëŠ” ìƒì†ê´€ê³„ë¼ëŠ” ê²ƒì´ ì—†ë‹¤.
ë”°ë¼ì„œ, ì´ë ‡ê²Œ ì–´ë…¸í…Œì´ì…˜ì´ íŠ¹ì • ì–´ë…¸í…Œì´ì…˜ì„ ë“¤ê³  ìˆëŠ” ê²ƒì„ ì¸ì‹í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ìë°” ì–¸ì–´ê°€ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì€ ì•„ë‹ˆê³ , ìŠ¤í”„ë§ì´ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.
*/
````
  
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ìš©ë„ ë¿ë§Œ ì•„ë‹ˆë¼ ì•„ë˜ì™€ ê°™ì€ ì–´ë…¸í…Œì´ì…˜ì´ ìˆìœ¼ë©´ ìŠ¤í”„ë§ì€ ë¶€ê°€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.
  - @Controller : ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì¸ì‹
  - @Repository : ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µìœ¼ë¡œ ì¸ì‹í•˜ê³ , ë°ì´í„° ê³„ì¸µì˜ ì˜ˆì™¸ë¥¼ ìŠ¤í”„ë§ ì˜ˆì™¸ë¡œ ë³€í™˜í•´ì¤€ë‹¤.
  - @Configuration : ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ë¡œ ì¸ì‹í•˜ê³ , ìŠ¤í”„ë§ ë¹ˆì´ ì‹±ê¸€í†¤ì„ ìœ ì§€í•˜ë„ë¡ ì¶”ê°€ ì²˜ë¦¬ë¥¼ í•œë‹¤.
  - @Service : íŠ¹ë³„í•œ ì²˜ë¦¬ë¥¼ í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ê°œë°œìë“¤ì´ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—¬ê¸°ì— ìˆë‹¤ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì¸µì„ ì¸ì‹í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤.
  
```
// ì°¸ê³ 
useDefaultFilters ì˜µì…˜ì€ ê¸°ë³¸ìœ¼ë¡œ ì¼œì ¸ìˆëŠ”ë°, ì´ ì˜µì…˜ì„ ë„ë©´ ê¸°ë³¸ ìŠ¤ìº” ëŒ€ìƒë“¤ì´ ì œì™¸ëœë‹¤.
```

- - -
## âœ” í•„í„°
- `includeFilters` : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì„ ì¶”ê°€ë¡œ ì§€ì •
- `excludeFilters` : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì œì™¸í•  ëŒ€ìƒì„ ì§€ì •

### 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì¶”ê°€í•  ì–´ë…¸í…Œì´ì…˜
test > java > hello.core.scan.filter > MyIncludeComponent.java (interface)
````java
package hello.core.scan.filter;

import java.lang.annotation.*;

@Target(ElementType.TYPE) // ì–´ë…¸í…Œì´ì…˜ì´ ì ìš©í•  ìœ„ì¹˜ë¥¼ ì§€ì • (íƒ€ì… ì„ ì–¸)
@Retention(RetentionPolicy.RUNTIME) // ì»´íŒŒì¼ ì´í›„ì—ë„ JVMì— ì˜í•´ ê³„ì† ì°¸ì¡° ê°€ëŠ¥
@Documented // í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì„ javadocì— í¬í•¨
public @interface MyIncludeComponent {
}
````
### 2. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•  ì–´ë…¸í…Œì´ì…˜
test > java > hello.core.scan.filter > MyExcludeComponent.java (interface)
````java
package hello.core.scan.filter;

import java.lang.annotation.*;

@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MyExcludeComponent {
}
````
### 3. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì— ì¶”ê°€í•  í´ë˜ìŠ¤
- `@MyIncludeComponent` ì ìš©
test > java > hello.core.scan.filter > BeanA.java (class)
````java
package hello.core.scan.filter;

@MyIncludeComponent
public class BeanA {
}
````
### 4. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì—ì„œ ì œì™¸í•  í´ë˜ìŠ¤
- `@MyExcludeComponent` ì ìš©
test > java > hello.core.scan.filter > BeanB.java (class)
````java
package hello.core.scan.filter;

@MyExcludeComponent
public class BeanB {
}
````
### 5. ì„¤ì • ì •ë³´ì™€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì½”ë“œ
- `includeFilters`ì— `MyIncludeComponent` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì„œ BeanAê°€ ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ëœë‹¤.
- `excludeFilters`ì— `MyExcludeComponent` ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì„œ BenaBëŠ” ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤.
test > java > hello.core.scan.filter > ComponentFilterAppConfigTest.java (class)
````java
package hello.core.scan.filter;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.NoSuchBeanDefinitionException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;

import static org.assertj.core.api.Assertions.assertThat;
import static org.springframework.context.annotation.ComponentScan.Filter;

public class ComponentFilterAppConfigTest {
    
    @Test
    void filterScan() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(ComponentFilterAppConfigTest.class);
        
        BeanA beanA = ac.getBean("beanA", BeanA.class);
        assertThat(beanA).isNotNull();

        Assertions.assertThrows(NoSuchBeanDefinitionException.class, () -> ac.getBean("beanB", BeanB.class));
    }
    
    @Configuration
    @ComponentScan(
            includeFilters = @Filter(type = FilterType.ANNOTATION, classes = MyIncludeComponent.class),
            excludeFilters = @Filter(type = FilterType.ANNOTATION, classes = MyExcludeComponent.class)
    )
    static class ComponentFilterAppConfig {
        
    }
}
````
  
### 6. FilterType ì˜µì…˜
| ì˜µì…˜ | ì„¤ëª… | Example |
|:--------|:--------|:--------|
| ANNOTATION | ê¸°ë³¸ê°’. ì–´ë…¸í…Œì´ì…˜ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤. | org.example.SomeAnnotation |
| ASSIGNABLE_TYPE | ì§€ì •í•œ íƒ€ì…ê³¼ ìì‹ íƒ€ì…ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤. | org.example.SomeClass |
| ASPECTJ | AspectJ íŒ¨í„´ ì‚¬ìš© | org.example..*Service+ |
| REGEX | ì •ê·œ í‘œí˜„ì‹ | org\.example\.Default.* |
| CUSTOM | TypeFilter ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ ì²˜ë¦¬ | org.example.MyTypeFilter |
  
- ì˜ˆë¥¼ ë“¤ì–´, BeanAë„ ì œì™¸í•˜ê³  ì‹¶ì„ ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•˜ë©´ ëœë‹¤.
````java
@ComponentScan(
        includeFilters = @Filter(type = FilterType.ANNOTATION, classes = MyIncludeComponent.class),
        excludeFilters = {
                @Filter(type = FilterType.ANNOTATION, classes = MyExcludeComponent.class),
                @Filter(type = FilterType.ASSIGNABLE_TYPE, classes = BeanA.class)
        }
)
````

- - -
## âœ” ì¤‘ë³µ ë“±ë¡ê³¼ ì¶©ëŒ
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ê°™ì€ ë¹ˆ ì´ë¦„ì„ ë“±ë¡í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
  - ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
  - ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
  
### 1. ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì— ì˜í•´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì´ ë“±ë¡ë˜ëŠ”ë°, ê·¸ ì´ë¦„ì´ ê°™ì€ ê²½ìš° ìŠ¤í”„ë§ì€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
  - `ConflictingBeanDefinitionException` ì˜ˆì™¸ ë°œìƒ
### 2. ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
- ìˆ˜ë™ ë¹ˆ ë“±ë¡ì´ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤. (ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”© í•´ë²„ë¦¼)
java > hello.core.member > MemoryMemberRepository.class
````java
@Component
public class MemoryMemberRepository implements MemberRepository {}
````
java > hello.core > AutoAppConfig.java
````java
package hello.core;

import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.FilterType;
import static org.springframework.context.annotation.ComponentScan.*;

@Configuration
@ComponentScan(excludeFilters = @Filter(type = FilterType.ANNOTATION, classes = Configuration.class))
public class AutoAppConfig {
    @Bean(name = "memoryMemberRepository")
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
}
````
  
#### ğŸ’¡ ìˆ˜ë™ ë¹ˆ ë“±ë¡ ì‹œ ë‚¨ëŠ” ë¡œê·¸
```
Overriding bean definition for bean 'memoryMemberRepository' with a different definition: replacing
```

#### ğŸ’¡ ìˆ˜ë™ ë¹ˆ ë“±ë¡, ìë™ ë¹ˆ ë“±ë¡ ì˜¤ë¥˜ ì‹œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì—ëŸ¬
- ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì´ ì¶©ëŒë‚˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ ê¸°ë³¸ ê°’ì„ ë°”ê¾¸ì—ˆë‹¤.
```
Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true
```
