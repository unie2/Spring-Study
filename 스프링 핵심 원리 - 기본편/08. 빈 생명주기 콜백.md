## âœ” ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°± ì‹œì‘
- ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬ í•´ë‘ê³ ,
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œì ì— ì—°ê²°ì„ ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´, `ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…`ì´ í•„ìš”í•˜ë‹¤.

### 1. ì˜ˆì œ
ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ë¯¸ë¦¬ ì—°ê²°í•˜ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì˜ˆì œ
- `NetworkClient`ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— `connect()`ë¥¼ í˜¸ì¶œí•´ì„œ ì—°ê²°ì„ ë§ºì–´ë‘ì–´ì•¼ í•˜ê³ ,
- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë˜ë©´ `disconnect()`ë¥¼ í˜¸ì¶œí•´ì„œ ì—°ê²°ì„ ëŠì–´ì•¼ í•œë‹¤.

#### (1) NetworkClient ìƒì„±
test > java > hello.core.lifecycle > NetworkClient.java (class)
````java
package hello.core.lifecycle;

public class NetworkClient {
    private String url;
    
    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }
    
    public void setUrl(String url) {
        this.url = url;
    }
    
    // ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }
    
    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }
    
    // ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " + url);
    }
}
````
#### (2) ìŠ¤í”„ë§ í™˜ê²½ì„¤ì •ê³¼ ì‹¤í–‰
test > java > hello.core.lifecycle.BeanLifeCycleTest.java (class)
````java
package hello.core.lifecycle;

import org.junit.jupiter.api.Test;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

public class BeanLifeCycleTest {
    @Test
    public void lifeCycleTest() {
        ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(LifeCycleConfig.class);
        NetworkClient client = ac.getBean(NetworkClient.class);
        ac.close(); // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œ, ConfigurableApplicationContext í•„ìš”
    }
    
    @Configuration
    static class LifeCycleConfig {
        @Bean
        public NetworkClient networkClient() {
            NetworkClient networkClient = new NetworkClient();
            networkClient.setUrl("http://hello-spring.dev");
            return networkClient;
        }
    }
}
````
#### (3) ì‹¤í–‰ ê²°ê³¼
```
ìƒì„±ì í˜¸ì¶œ, url = null
connect: null
call: null message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
```
- ìƒì„±ì ë¶€ë¶„ì„ ë³´ë©´ url ì •ë³´ ì—†ì´ connectê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë‹¨ê³„ì—ëŠ” urlì´ ì—†ê³ , ê°ì²´ë¥¼ ìƒì„±í•œ ë‹¤ìŒì— ì™¸ë¶€ì—ì„œ ìˆ˜ì •ì ì£¼ì…ì„ í†µí•´ `setUrl()`ì´ í˜¸ì¶œë˜ì–´ì•¼ urlì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤.

### 2. ë¼ì´í”„ì‚¬ì´í´
- ìŠ¤í”„ë§ ë¹ˆì€ `ê°ì²´ ìƒì„± -> ì˜ì¡´ê´€ê³„ ì£¼ì…` ë¼ì´í”„ì‚¬ì´í´ì„ ê°€ì§„ë‹¤.
  - ìŠ¤í”„ë§ ë¹ˆì€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ë‹¤ ëë‚œ ë‹¤ìŒì—ì•¼ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¤€ë¹„ê°€ ì™„ë£Œëœë‹¤.
  - ë”°ë¼ì„œ ì´ˆê¸°í™” ì‘ì—…ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ëª¨ë‘ ì™„ë£Œë˜ê³  ë‚œ ë‹¤ìŒì— í˜¸ì¶œí•´ì•¼ í•œë‹¤.
- ìŠ¤í”„ë§ì€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ `ì½œë°± ë©”ì„œë“œ`ë¥¼ í†µí•´ì„œ ì´ˆê¸°í™” ì‹œì ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
- ë˜í•œ, ìŠ¤í”„ë§ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ê¸° ì§ì „ì— `ì†Œë©¸ ì½œë°±`ì„ ì¤€ë‹¤.
- ë”°ë¼ì„œ ì•ˆì „í•˜ê²Œ ì¢…ë£Œ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.

### 3. ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´
```
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± > ìŠ¤í”„ë§ ë¹ˆ ìƒì„± > ì˜ì¡´ê´€ê³„ ì£¼ì… > ì´ˆê¸°í™” ì½œë°± > ì‚¬ìš© > ì†Œë©¸ì „ ì½œë°± > ìŠ¤í”„ë§ ì¢…ë£Œ
```
- ì´ˆê¸°í™” ì½œë°± : ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ
- ì†Œë©¸ì „ ì½œë°± : ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ
- ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•œë‹¤.
  - ì¸í„°í˜ì´ìŠ¤(InitializingBean, DisposableBean)
  - ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •
  - @PostConstruct, @PreDestroy, ì–´ë…¸í…Œì´ì…˜ ì§€ì›


- - -
## âœ” ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean
test > java > hello.core.lifecycle > NetworkClient.java
````java
package hello.core.lifecycle;

import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;

public class NetworkClient implements InitializingBean, DisposableBean {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " + url);
    }
    
    @Override
    public void afterPropertiesSet() throws Exception {
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }
    @Override
    public void destroy() throws Exception {
        disconnect();
    }
}
````
- `InitializingBean` : `afterPropertiesSet()` ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ë¥¼ ì§€ì›í•œë‹¤.
- `DisposableBean` : `destroy()` ë©”ì„œë“œë¡œ ì†Œë©¸ì„ ì§€ì›í•œë‹¤.

#### ì¶œë ¥ ê²°ê³¼
- ì´ˆê¸°í™” ë©”ì„œë“œê°€ ì£¼ì… ì™„ë£Œ í›„ì— ì ì ˆí•˜ê²Œ í˜¸ì¶œëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì¢…ë£Œê°€ í˜¸ì¶œë˜ì ì†Œë©¸ ë©”ì„œë“œê°€ í˜¸ì¶œëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
```
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.afterPropertiesSet
connect: http://hello-spring.dev
call: http://hello-spring.dev message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
12:36:33.924 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing NetworkClient.destroy
close: http://hello-spring.dev
```

### ğŸ’¡ ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì 
- ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤.
- ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.


- - -
## âœ” ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œ ì§€ì •
ì„¤ì • ì •ë³´ì— `@Bean(initMethod = "init", destroyMethod = "close")`ì²˜ëŸ¼ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

### 1. ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
test > java > hello.core.lifecycle > NetworkClient.java
````java
package hello.core.lifecycle;

public class NetworkClient {
    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message = " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " + url);
    }

    public void init() {
        System.out.println("NetworkClient.init");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }
    
    public void close() {
        System.out.println("NetworkClient.close");
        disconnect();
    }
}
````
### 2. ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ì†Œë©¸ ë©”ì„œë“œ ì§€ì •
test > java > hello.core.lifecycle > LifeCycleConfig.java
````java
@Configuration
static class LifeCycleConfig {
    @Bean(initMethod = "init", destroyMethod = "close")
    public NetworkClient networkClient() {
        NetworkClient networkClient = new NetworkClient();
        networkClient.setUrl("http://hello-spring.dev");
        return networkClient;
    }
}
````

#### ì‹¤í–‰ ê²°ê³¼
```
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.init
connect: http://hello-spring.dev
call: http://hello-spring.dev message = ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
12:45:23.493 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing NetworkClient.close
close: http://hello-spring.dev
```

### ğŸ’¡ ì„¤ì • ì •ë³´ ì‚¬ìš© íŠ¹ì§•
- ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.

### ğŸ’¡ ì¢…ë£Œ ë©”ì„œë“œ ì¶”ë¡ 
- `@Beanì˜ destroyMethod` ì†ì„±ì—ëŠ” ì•„ì£¼ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ìˆë‹¤.
- ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëŒ€ë¶€ë¶„ `close`, `shutdown` ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
- @Beanì˜ `destroyMethod`ëŠ” ê¸°ë³¸ê°’ì´ `(inferred)`(ì¶”ë¡ )ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆë‹¤.
- ì´ ì¶”ë¡  ê¸°ëŠ¥ì€ `close`, `shutdown` ë¼ëŠ” ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤. ì´ë¦„ ê·¸ëŒ€ë¡œ ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œí•´ì¤€ë‹¤.
- ë”°ë¼ì„œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ì¢…ë£Œ ë©”ì„œë“œëŠ” ë”°ë¡œ ì ì–´ì£¼ì§€ ì•Šì•„ë„ ì˜ ë™ì‘í•œë‹¤.
- ì¶”ë¡  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì‹«ìœ¼ë©´ `destroyMethod=""`ì²˜ëŸ¼ ë¹ˆ ê³µë°±ì„ ì§€ì •í•˜ë©´ ëœë‹¤.


- - -
